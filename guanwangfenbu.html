<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>yangyan</title>
<style>
*{margin:0;padding:0;list-style:none;}
#ul1{ position:relative;width:510px; margin:30px auto;}
#ul1 li{float:left;width:150px; height:150px; margin:10px; background:#ccc;}
</style>
<script src="javascripts/move.js"></script>
<script>
window.onload = function(){
	var oUl = document.getElementById("ul1");
	var aLi = oUl.children;
	var len = aLi.length;
	
	//布局转换
	var aPos = [];
	for(var i = 0; i < len; i++){
		aPos[i] = {left:aLi[i].offsetLeft,top:aLi[i].offsetTop};
		aLi[i].style.left = aPos[i].left +　"px";
		aLi[i].style.top  = aPos[i].top  +　"px";
	}
	
	for(var i = 0; i < len; i++){
		aLi[i].style.position  =  "absolute";
		aLi[i].style.margin  =  "0";
	}
	
	//收！
	var oBtn = document.getElementById("btn1");
	
	var timer = null;
	oBtn.onclick = function(){
		var i = 0;
		clearInterval(timer);
		timer = setInterval(function(){
			
			
			(function(index){
				move(aLi[i],{left:0,top:0,width:0,height:0,opacity:0},{
					
					complete:function(){
						//alert(index);
						if(index == len - 1){
							//alert("运动完成！");
							//放出来
							var i = index;
							
							clearInterval(timer);
							timer = setInterval(function(){
								
								move(aLi[i],{left:aPos[i].left,top:aPos[i].top,width:150, height:150,opacity:1});
								
								i--;
								
								if(i == -1){
									clearInterval(timer);
								}
								
									
							},100);
							
							
								
						}
					}
						
				});
			})(i);
			
			i++;
			
			if(i == len){
				clearInterval(timer);
			}
		},100);
	};
	
	
};
</script>
</head>

<body>
<input id="btn1" type="button" value="收！" />
<ul id="ul1">
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
</ul>

</body>
</html>
